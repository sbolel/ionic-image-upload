/*! image-uploader 20-06-2016 */
!function(a){"use strict";function b(b){const c=Object.assign({},f,b);return a.config.update({accessKeyId:c.accessKeyId,secretAccessKey:c.secretAccessKey,region:c.region}),this._err={},this._accessKeyId=c.accessKeyId,this._secretAccessKey=c.secretAccessKey,this._region=c.region,this._bucketName=c.bucketName,this._bucketUrl=c.bucketUrl,this._file=c.file,this._uploadProgress=c.uploadProgress,this._sizeLimit=c.sizeLimit,this._bucket=new a.S3({params:{Bucket:this._bucketName}}),this}const c=10485760,d=Math.round(10)+"MB",e=function(){var a="";const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var c=0;c<8;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a},f={accessKeyId:"AKIAJDDLMBIFFIUWYCEA",bucket:{},bucketName:"com.thinkcrazy.ionicimageupload",bucketUrl:"https://s3.amazonaws.com/com.thinkcrazy.ionicimageupload/",file:{},region:"us-east-1",secretAccessKey:"gCF19auerZBOx9IvpPpKAlCJYbD0yUo+bLyNB+wA",sizeLimit:c,uploadProgress:0};b.prototype={validateFile:function(a){return a.size||(this._err={message:"Missing file argument",code:"No File"}),a.size<=0&&(this._err={message:"File has size of 0",code:"Erroneous File"}),Math.round(parseInt(a.size,10))>this._sizeLimit&&(this._err={code:"File Too Large",message:"Attachment too big. Max "+d+" allowed"}),this._err},clearProgress:function(){this._uploadProgress=0},updateProgress:function(a){this._uploadProgress=a},resetUploadProgress:function(){setTimeout(function(){b.prototype.clearProgress()},100)},push:function(a){const b=this;if(!this.validateFile(a))throw new Error("Missing file.");const c=encodeURI(e()+"-"+a.name),d={ACL:"public-read",Body:a,Bucket:this._bucketName,ContentType:a.type,Key:c,ServerSideEncryption:"AES256"};return this.updateProgress(0),new Promise(function(a,e){b._bucket.putObject(d,function(d,f){d&&(b._err=Object.assign({},d,{data:f}),e(d)),b.resetUploadProgress(),Object.assign(f,f,{filename:c,url:b._bucketUrl+c}),a(f)}).on("httpUploadProgress",function(a){b.updateProgress(Math.round(a.loaded/a.total*100))})})}},window.ImageUploader=b}(AWS);